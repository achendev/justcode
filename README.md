# üöÄ Just Code

Just Code is a rapid development tool that bridges the gap between your local development environment and a Large Language Model (LLM) chat interface. It allows you to:

<p align="center">
  <img width="350" alt="justcode" src="https://github.com/user-attachments/assets/3140f2f2-d0d1-4b5c-8b55-1310e1220acc" />
</p>

1.  **Send your entire project's context** to an LLM with a single click and prompt your task.
2.  **Deploy code generated by the LLM** in many files back to your local files with another single click.
3.  **Instantly rollback** any changes that doesn't work as expected.

This creates a tight, safe, and incredibly fast feedback loop for iterating on code with AI assistance. Because the LLM receives the full context, it can generate scripts that create, modify, and delete dozens of files at once, allowing you to implement complex features with a single deployment.

> **üí° Pro Tip: Recommended LLM**   
> While JustCode can work with many LLMs, it is highly optimized for and tested with **Google AI Studio** using the **Gemini 2.5 Pro** model. Its large context (1 million tokens) window  and strong instruction-following capabilities provide the most reliable results.

## ‚öôÔ∏è How It Works

The system consists of two main components:

*   **üñ•Ô∏è A Local Flask Server (`app.py`):** This server runs on your machine and acts as the bridge to your filesystem.
    *   `/getcontext`: Scans a specified project directory, bundles all relevant source files into a single text block, and formats it as a prompt for the LLM.
    *   `/deploycode`: Receives a shell script from the browser, creates a rollback script, performs a security validation, and executes it to update your local files.
    *   `/rollback`: Executes the last generated rollback script, undoing the previous deployment for a specific project.
    *   `/update`: Performs a `git pull` to update the JustCode application to the latest version.

*   **üß© Chrome Extension (`chrome_extension/`):** A user-friendly popup interface.
    *   **Popup Interface:** Contains an input for the project path and three main buttons: "Get Context," "Deploy Code," and "Rollback."
    *   **Shortcuts:** 
        *   `Alt + ‚Üë`: Open the extension popup.
        *   When the popup is open:
            *   `Alt + ‚Üê`: Trigger "Get Context" for the active profile.
            *   `Alt + ‚Üí`: Trigger "Deploy Code" for the active profile.
            *   `Alt + R`: Trigger "Rollback" for the active profile.
            *   `Alt + A`: Switch to the profile tab on the left (loops around).
            *   `Alt + S`: Switch to the profile tab on the right (loops around).
    
    > **Note on Shortcuts:** If the `Alt + ‚Üë` shortcut to open the extension doesn't work, you may need to set or reset it. Go to `chrome://extensions/shortcuts` in your browser, find the "JustCode Extension", and assign your preferred shortcut for the "Open JustCode Popup" action.

## ‚Ü©Ô∏è Automatic Rollback

Never fear a bad deployment again. Just Code includes a powerful safety net:

*   **Automatic Backup:** Before any `deploy` operation is executed, the system automatically generates a "rollback script". This script captures the current state of any files or directories that are about to be modified, created, or deleted.
*   **Instant Recovery:** If a deployment produces an undesirable result (e.g., AI made the mistake in the implementation), simply click the **Rollback** button in the extension's profile.

This feature allows you to experiment and iterate with AI-generated code fearlessly, knowing you can undo any changes with a single click.

## ‚úÖ Prerequisites

*   üêç Python 3.10 or higher
*   üì¶ `pip` and `venv` (usually included with Python)
*   üêô Git for cloning the repository
*   üåê Google Chrome or a Chromium-based browser that supports loading unpacked extensions.

## üõ†Ô∏è Setup

The setup process involves three main stages: cloning the code, setting up the local server, and installing the browser extension.

### Stage 1: Clone the Repository

Open your terminal or command prompt and run the following command:

    git clone https://github.com/achendev/justcode.git
    cd justcode

### Stage 2: Set Up and Run the Local Server

Follow the instructions for your operating system to set up the Python environment and run the server.

#### üçé macOS & üêß Linux (Ubuntu, AlmaLinux, etc.)

1.  **Configure the Server (Optional)**
    The server listens on `127.0.0.1:5010` by default. You can change this by creating a `.env` file. See the [Server Configuration](#-server-configuration) section for more details.
    ```bash
    # Copy the example config to a new .env file
    cp .env.example .env
    ```
    Now you can edit `.env` to change the host or port.

2.  **Create and Activate Virtual Environment**
    In the `justcode` directory, run:
    ```bash
    # Create a Python virtual environment
    python3 -m venv venv

    # Activate the environment
    source venv/bin/activate
    ```

3.  **Install Dependencies**
    With the environment active, install the required packages:
    ```bash
    pip install -r requirements.txt
    ```

4.  **Run the Server**
    You can run the server directly with `python app.py`, or use the provided helper script:
    ```bash
    # Run the server
    ./app.sh
    ```
    Keep this terminal window open. You should see a message confirming the server is running.


#### ü™ü Windows

1.  **Configure the Server (Optional)**
    The server listens on `127.0.0.1:5010` by default. You can change this by creating a `.env` file. See the [Server Configuration](#-server-configuration) section for more details.
    
    In PowerShell or CMD, run:
    ```powershell
    # Copy the example config to a new .env file
    copy .env.example .env
    ```
    Now you can edit `.env` with Notepad or another editor to change the host or port.

2.  **Create and Activate Virtual Environment**
    In the `justcode` directory, open **PowerShell** (recommended) or **Command Prompt (`cmd`)**.

    ```powershell
    # Create a Python virtual environment
    # You may need to use 'py', 'python.exe' or 'python3.exe' if 'python' is not in your PATH
    python -m venv venv

    # Activate the environment in PowerShell
    .\venv\Scripts\Activate.ps1
    ```
    > **Note for PowerShell:** If you get an error about script execution being disabled, run `Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope Process` and try activating again.

    > If using the classic **Command Prompt (`cmd.exe`)**, activate with this command instead of:
    > `venv\Scripts\activate.bat`

3.  **Install Dependencies**
    Once the environment is active (your prompt will be prefixed with `(venv)`), run:
    ```bash
    pip install -r requirements.txt
    ```

4.  **Run the Server**
    You can run the server directly with `python app.py`. Alternatively, you can run the provided batch script from your terminal or by double-clicking it in the file explorer.
    ```batch
    .\app.bat
    ```
    Keep this terminal window open. You should see a message confirming the server is running.

### Stage 3: Load and Configure the Chrome Extension

These steps are the same for all operating systems.

1.  **Load the Extension:**
    *   Open Chrome and navigate to `chrome://extensions/`.
    *   Enable **Developer mode** using the toggle switch (usually in the top-right corner).
    *   Click the **Load unpacked** button.
    *   In the file dialog, select the `chrome_extension` folder located inside your `justcode` project directory.

2.  **Pin the Extension for Easy Access:**
    *   After loading, click the puzzle piece icon üß© in the Chrome toolbar to see your list of extensions.
    *   Find the **JustCode Extension** and click the **pin** icon next to it.
    *   This will keep the JustCode icon visible in your toolbar for one-click access.

3.  **Grant Clipboard Permission**

    Just Code requires permission to read from and write to your clipboard. This must be enabled manually in the extension's settings.

    **How to enable:**
    *   In Chrome, go to **Settings**.
    *   Navigate to **Extensions** on the left menu.
    *   Find the **JustCode Extension** and click on the **Details** button.
    *   On the details page, click on **Site settings**.
    *   Find **Clipboard** in the permissions list and change its value to **Allow**.

    *This is a critical one-time setup step to allow the extension to read the code provided by the LLM.*

## üîß Server Configuration

You can configure the server's listening address and port using a `.env` file in the project root.

1.  Copy the example file: `cp .env.example .env` (or `copy .env.example .env` on Windows).
2.  Edit `.env`:
    *   `FLASK_RUN_HOST`: The IP address to bind to.
        *   `127.0.0.1` (Default): Accessible only from your own computer. Debug mode is **ON**.
        *   `0.0.0.0`: Accessible from other devices on your network. **Debug mode is automatically turned OFF for security.**
    *   `FLASK_RUN_PORT`: The port to listen on (e.g., `5010`).

If you change the server URL or port, remember to update it in the extension's profile settings.

## üóÇÔ∏è Handling Large Projects: Automatic Context Filtering

LLMs have a context window limit, meaning you can't always send your entire project's source code at once. JustCode has a smart feature to help you manage this.

### Context Size Limit

In each profile's settings (click the ‚öôÔ∏è button), you can set a **Context Size Limit** in characters. The default is 3,000,000.

### Automatic Exclusion Suggestions

If you click `Get Context` and the tool determines that your project's content exceeds this limit, it won't send the code. Instead, it will do the following:

1.  **Analyze Your Project:** It quickly scans your project's file structure and the size of each file.
2.  **Generate a Smart Prompt:** It sends this file tree analysis to the LLM, asking it to suggest which files and directories should be excluded to shrink the context size. The prompt is specifically designed to identify common non-essential files like `node_modules`, build artifacts, large data files, and logs.
3.  **Receive Exclusion Patterns:** The LLM will respond with a comma-separated list of patterns (e.g., `node_modules/,dist/,*.log`).
4.  **Update and Retry:** You can then copy this list, paste it into your profile's "Exclude Patterns" field, and click `Get Context` again.

This workflow turns the tedious task of manually curating a large project's context into a quick, AI-assisted process.

## üîÑ Usage Workflow

1.  **Start the Server:** Ensure the local Flask server is running.
2.  **Go to LLM:** Navigate to your preferred LLM chat interface.
3.  **Open Popup:** Click the JustCode extension icon in your browser toolbar or press `Alt+‚Üë`.
4.  **Set Path:** In the active profile, enter the absolute path to your project.
5.  **Get Context:** Click the `Get Context` button or press `Alt+‚Üê`. Your project's entire code structure and content will be loaded into the LLM's prompt area.
6.  **Add Your Task:** This is the key step. Press space or start typing to scroll to the **bottom** of the large code block that was just pasted, and add your instructions for the LLM. For example: "Add a new endpoint called `/status` that returns `{'status': 'ok'}`" or "Refactor the `handle_user_login` function to be more secure".
7.  **Submit to LLM:** Send the combined context and your instructions to the model.
8.  **Get Response:** The LLM will analyze your request and the provided code, then respond with a `bash` script designed to perform the changes.
9.  **Deploy Code:** Click the `Deploy Code` button or press `Alt+‚Üí`. The extension will send this script to your local server for execution.
10. **Verify:** Check your local files. They are now updated.


> **üí° Pro Tip: What if a deployment goes wrong?**   
> If a deployment fails or makes unwanted changes, just click the **Rollback** button for that profile. It will instantly restore your files to the state they were in before you clicked "Deploy Code".

## ‚ö†Ô∏è Security Warning

This tool executes code generated by an LLM directly on your machine. This is **not foolproof**.

*   **ALWAYS review the `bash` script** before clicking "Deploy Code". Malicious commands can delete files.
*   **A rollback script is created automatically**, giving you a way to recover from mistakes, but it's not a substitute for careful review.
*   **This tool is intended for personal development and rapid prototyping**.
*   **Use at your own risk.**

## üìÇ Project Structure

    justcode/
    ‚îú‚îÄ‚îÄ app.py                      # Main Flask application runner
    ‚îú‚îÄ‚îÄ server/                     # Backend server logic
    ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
    ‚îÇ   ‚îú‚îÄ‚îÄ deploy_code_endpoint.py # Handles /deploycode endpoint
    ‚îÇ   ‚îú‚îÄ‚îÄ get_context_endpoint.py # Handles /getcontext endpoint
    ‚îÇ   ‚îú‚îÄ‚îÄ rollback_endpoint.py    # Handles /rollback endpoint
    ‚îÇ   ‚îú‚îÄ‚îÄ update_endpoint.py      # Handles /update endpoint for git pull
    ‚îÇ   ‚îî‚îÄ‚îÄ tools.py                # Common utility functions for the server
    ‚îú‚îÄ‚îÄ app.sh                      # Helper script to run server on macOS/Linux
    ‚îú‚îÄ‚îÄ app.bat                     # Helper script to run server on Windows
    ‚îú‚îÄ‚îÄ chrome_extension/
    ‚îÇ   ‚îú‚îÄ‚îÄ icons/                  # Extension icons (16, 48, 128)
    ‚îÇ   ‚îú‚îÄ‚îÄ js/                     # JavaScript modules
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deploy_code.js      # Logic for deploying code
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ event_attacher.js   # Wires up all UI event listeners
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ get_context.js      # Logic for getting project context
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rollback.js         # Logic for reverting a deployment
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ storage.js          # Manages user profiles in storage
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui.js               # Renders the popup UI and orchestrates events
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui_handlers/        # Small modules for handling specific UI events
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ actions.js
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ inputs.js
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ message.js
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ profile.js
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ renderer.js
    ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ settings.js
    ‚îÇ   ‚îú‚îÄ‚îÄ manifest.json           # Extension configuration
    ‚îÇ   ‚îú‚îÄ‚îÄ popup.html              # Extension popup UI
    ‚îÇ   ‚îî‚îÄ‚îÄ popup.js                # Main entry point for the popup
    ‚îú‚îÄ‚îÄ .env.example                # Example environment file for server config
    ‚îú‚îÄ‚îÄ .gitignore                  # Standard git ignore file
    ‚îú‚îÄ‚îÄ requirements.txt            # Python dependencies
    ‚îî‚îÄ‚îÄ README.md                   # This file